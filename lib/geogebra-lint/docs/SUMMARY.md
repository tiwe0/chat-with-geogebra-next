# GeoGebra Lint å¼•æ“å®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒè§£æå™¨

#### Lexer (è¯æ³•åˆ†æå™¨) - `src/core/parser/lexer.ts`

**åŠŸèƒ½:**
- âœ… Token ç±»å‹å®šä¹‰ (TokenType enum)
- âœ… è¯†åˆ«æ ‡è¯†ç¬¦ (IDENTIFIER)
- âœ… è¯†åˆ«æ•°å­— (NUMBERï¼Œæ”¯æŒæ•´æ•°ã€å°æ•°ã€è´Ÿæ•°ã€ç§‘å­¦è®¡æ•°æ³•)
- âœ… è¯†åˆ«å­—ç¬¦ä¸² (STRINGï¼Œæ”¯æŒåŒå¼•å·å’Œå•å¼•å·)
- âœ… è¯†åˆ«å¸ƒå°”å€¼ (BOOLEAN: true/false)
- âœ… è¯†åˆ«ç¬¦å· (æ‹¬å·ã€å¤§æ‹¬å·ã€é€—å·ã€ç­‰å·ã€åˆ†å·)
- âœ… è¯†åˆ«æ¢è¡Œç¬¦ (NEWLINE)
- âœ… è·³è¿‡ç©ºç™½å­—ç¬¦
- âœ… å¤„ç†å•è¡Œæ³¨é‡Š (//)
- âœ… å­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦å¤„ç†
- âœ… ä½ç½®ä¿¡æ¯è¿½è¸ª (è¡Œå·ã€åˆ—å·)

**ç‰¹è‰²:**
- å®Œæ•´çš„é”™è¯¯ä½ç½®ä¿¡æ¯
- æ”¯æŒå¤šç§æ•°å­—æ ¼å¼
- è½¬ä¹‰å­—ç¬¦å¤„ç†

#### Parser (è¯­æ³•åˆ†æå™¨) - `src/core/parser/parser.ts`

**åŠŸèƒ½:**
- âœ… è§£æç¨‹åºæ ¹èŠ‚ç‚¹ (Program)
- âœ… è§£æå‘½ä»¤è¯­å¥ (CommandStatement)
- âœ… è§£æèµ‹å€¼è¯­å¥ (var = Command(...))
- âœ… è§£æè¡¨è¾¾å¼ (Expression)
- âœ… è§£ææ ‡è¯†ç¬¦ (Identifier)
- âœ… è§£ææ•°å­—å­—é¢é‡ (NumberLiteral)
- âœ… è§£æå­—ç¬¦ä¸²å­—é¢é‡ (StringLiteral)
- âœ… è§£æå¸ƒå°”å­—é¢é‡ (BooleanLiteral)
- âœ… è§£æåˆ—è¡¨å­—é¢é‡ (ListLiteral: {1, 2, 3})
- âœ… è§£æå‡½æ•°/å‘½ä»¤è°ƒç”¨ (FunctionCall)
- âœ… æ”¯æŒåµŒå¥—è°ƒç”¨ (å¦‚: SetValue(a, x(b)))
- âœ… é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶
- âœ… è‡ªå®šä¹‰ ParseError ç±»
- âœ… å®Œæ•´çš„æºç ä½ç½®ä¿¡æ¯

**ç‰¹è‰²:**
- é€’å½’ä¸‹é™è§£æ
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- æ”¯æŒå¤æ‚åµŒå¥—è¡¨è¾¾å¼

### 2. ç±»å‹å®šä¹‰

#### AST ç±»å‹ - `src/core/parser/ast.d.ts`

- âœ… Position (ä½ç½®ä¿¡æ¯)
- âœ… SourceLocation (æºç èŒƒå›´)
- âœ… BaseNode (åŸºç¡€èŠ‚ç‚¹)
- âœ… Program (ç¨‹åºæ ¹èŠ‚ç‚¹)
- âœ… CommandStatement (å‘½ä»¤è¯­å¥)
- âœ… Expression (è¡¨è¾¾å¼è”åˆç±»å‹)
- âœ… Identifier (æ ‡è¯†ç¬¦)
- âœ… NumberLiteral (æ•°å­—å­—é¢é‡)
- âœ… StringLiteral (å­—ç¬¦ä¸²å­—é¢é‡)
- âœ… BooleanLiteral (å¸ƒå°”å­—é¢é‡)
- âœ… ListLiteral (åˆ—è¡¨å­—é¢é‡)
- âœ… FunctionCall (å‡½æ•°è°ƒç”¨)
- âœ… ASTNode (æ‰€æœ‰èŠ‚ç‚¹çš„è”åˆç±»å‹)

### 3. é¡¹ç›®é…ç½®

- âœ… `package.json` - ä¾èµ–å’Œè„šæœ¬é…ç½®
- âœ… `tsconfig.json` - TypeScript ç¼–è¯‘é…ç½®
- âœ… `tsconfig.test.json` - æµ‹è¯•é…ç½®
- âœ… `jest.config.js` - Jest æµ‹è¯•é…ç½®
- âœ… `.eslintrc.js` - ESLint é…ç½®
- âœ… `.gitignore` - Git å¿½ç•¥æ–‡ä»¶

### 4. æ–‡æ¡£

- âœ… `README.md` - å®Œæ•´é¡¹ç›®æ–‡æ¡£
- âœ… `EXAMPLES.md` - è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹
- âœ… `QUICKSTART.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… `SUMMARY.md` - æœ¬æ€»ç»“æ–‡æ¡£

### 5. æµ‹è¯•å’Œç¤ºä¾‹

- âœ… `tests/unit/lexer.test.ts` - Lexer å•å…ƒæµ‹è¯•
- âœ… `tests/unit/parser.test.ts` - Parser å•å…ƒæµ‹è¯•
- âœ… `tests/parser-example.ts` - ä½¿ç”¨ç¤ºä¾‹
- âœ… `tests/fixtures/example.ggb` - æµ‹è¯•æ•°æ®
- âœ… `scripts/cli.js` - CLI å‘½ä»¤è¡Œå·¥å…·

### 6. å¯¼å‡ºæ¨¡å—

- âœ… `src/core/index.ts` - ç»Ÿä¸€å¯¼å‡ºæ¥å£

## ğŸ¯ æ”¯æŒçš„ GeoGebra è¯­æ³•

### å‘½ä»¤è°ƒç”¨
```geogebra
SetValue(a, 1)
Point(A, 1, 2)
Distance(P, Q)
```

### èµ‹å€¼è¯­å¥
```geogebra
P = Point(1, 2)
a = 5
myList = {1, 2, 3}
```

### æ•°æ®ç±»å‹
- **æ•°å­—**: `1`, `3.14`, `-5`, `2.5e10`
- **å­—ç¬¦ä¸²**: `"red"`, `'Hello World'`
- **å¸ƒå°”å€¼**: `true`, `false`
- **åˆ—è¡¨**: `{1, 2, 3}`, `{A, B, C}`
- **æ ‡è¯†ç¬¦**: `A`, `myPoint`, `slider1`

### åµŒå¥—è°ƒç”¨
```geogebra
SetValue(A, x(B))
Distance(Point(0, 0), Point(3, 4))
P = Point(x(A), y(B))
```

### æ³¨é‡Š
```geogebra
// å•è¡Œæ³¨é‡Š
SetValue(a, 1)  // è¡Œå°¾æ³¨é‡Š
```

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **æ ¸å¿ƒä»£ç **: ~600 è¡Œ TypeScript
- **æµ‹è¯•ä»£ç **: ~200 è¡Œ
- **æ–‡æ¡£**: ~1000 è¡Œ
- **é…ç½®æ–‡ä»¶**: 6 ä¸ª

## ğŸš€ ä½¿ç”¨æ–¹å¼

### åŸºæœ¬ä½¿ç”¨

```typescript
import { parseGeoGebraScript } from './src/core/parser/parser';

const code = `SetValue(a, 1)`;
const ast = parseGeoGebraScript(code);
```

### è¯æ³•åˆ†æ

```typescript
import { Lexer } from './src/core/parser/lexer';

const lexer = new Lexer('SetValue(a, 1)');
const tokens = lexer.tokenize();
```

### é”™è¯¯å¤„ç†

```typescript
import { parseGeoGebraScript, ParseError } from './src/core/parser/parser';

try {
    parseGeoGebraScript('Invalid(');
} catch (error) {
    if (error instanceof ParseError) {
        console.log(error.message, error.position);
    }
}
```

## ğŸ¨ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GeoGebra ä»£ç   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Lexer  â”‚  è¯æ³•åˆ†æ
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚ Token æµ
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Parser  â”‚  è¯­æ³•åˆ†æ
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚ AST
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Rules  â”‚  è§„åˆ™å¼•æ“ (å¾…å®ç°)
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚ é”™è¯¯/è­¦å‘Š
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Output  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ npm è„šæœ¬

```bash
npm run build        # ç¼–è¯‘ TypeScript
npm run watch        # ç›‘å¬æ¨¡å¼ç¼–è¯‘
npm test            # è¿è¡Œæµ‹è¯•
npm run test:watch  # æµ‹è¯•ç›‘å¬æ¨¡å¼
npm run lint        # ä»£ç æ£€æŸ¥
npm run format      # ä»£ç æ ¼å¼åŒ–
npm run demo        # è¿è¡Œæ¼”ç¤º
```

## ğŸ”œ åç»­å¯ä»¥å®ç°çš„åŠŸèƒ½

### è§„åˆ™å¼•æ“
- [ ] `correct-arg-types` - å‚æ•°ç±»å‹æ£€æŸ¥
- [ ] `no-unknown-command` - æœªçŸ¥å‘½ä»¤æ£€æŸ¥
- [ ] è‡ªå®šä¹‰è§„åˆ™ç³»ç»Ÿ

### å¢å¼ºåŠŸèƒ½
- [ ] æ›´å¤šçš„è¡¨è¾¾å¼ç±»å‹ (ç®—æœ¯è¿ç®—ã€æ¯”è¾ƒè¿ç®—ç­‰)
- [ ] å¤šè¡Œå‘½ä»¤æ”¯æŒ
- [ ] æ¡ä»¶è¯­å¥æ”¯æŒ
- [ ] å¾ªç¯è¯­å¥æ”¯æŒ
- [ ] å‡½æ•°å®šä¹‰æ”¯æŒ

### å·¥å…·
- [ ] VS Code æ‰©å±•
- [ ] è¯­æ³•é«˜äº®
- [ ] è‡ªåŠ¨è¡¥å…¨
- [ ] é‡æ„å·¥å…·

### ä¼˜åŒ–
- [ ] æ›´å¥½çš„é”™è¯¯æ¢å¤
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å¢é‡è§£æ

## ğŸ“ æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript 5.0
- **æµ‹è¯•**: Jest
- **ä»£ç æ£€æŸ¥**: ESLint + TypeScript-ESLint
- **æ ¼å¼åŒ–**: Prettier
- **æ„å»º**: TypeScript Compiler

## ğŸ’¡ è®¾è®¡äº®ç‚¹

1. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
2. **å¯æ‰©å±•**: æ¸…æ™°çš„æ¶æ„ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½
3. **é”™è¯¯å¤„ç†**: è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œä½ç½®è¿½è¸ª
4. **æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
5. **æ–‡æ¡£å®Œå–„**: å¤šä¸ªæ–‡æ¡£æ–‡ä»¶ï¼Œè¯¦ç»†çš„ä½¿ç”¨ç¤ºä¾‹
6. **å·¥å…·å®Œå¤‡**: CLI å·¥å…·ï¼Œæµ‹è¯•è„šæœ¬

## ğŸ‰ æ€»ç»“

æˆåŠŸå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ GeoGebra è„šæœ¬è§£æå¼•æ“ï¼ŒåŒ…æ‹¬:

âœ… è¯æ³•åˆ†æå™¨ (Lexer)
âœ… è¯­æ³•åˆ†æå™¨ (Parser)
âœ… å®Œæ•´çš„ AST ç±»å‹å®šä¹‰
âœ… é”™è¯¯å¤„ç†æœºåˆ¶
âœ… å•å…ƒæµ‹è¯•
âœ… CLI å·¥å…·
âœ… å®Œå–„çš„æ–‡æ¡£

è¯¥å¼•æ“å¯ä»¥æ­£ç¡®è§£æ GeoGebra è„šæœ¬ï¼Œç”Ÿæˆç»“æ„åŒ–çš„ ASTï¼Œä¸ºåç»­çš„ lint è§„åˆ™å®ç°æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚

## ğŸ“š æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶
- `src/core/parser/lexer.ts` - è¯æ³•åˆ†æå™¨å®ç°
- `src/core/parser/parser.ts` - è¯­æ³•åˆ†æå™¨å®ç°
- `src/core/parser/ast.d.ts` - AST ç±»å‹å®šä¹‰
- `src/core/index.ts` - ç»Ÿä¸€å¯¼å‡º

### é…ç½®æ–‡ä»¶
- `package.json` - é¡¹ç›®é…ç½®
- `tsconfig.json` - TypeScript é…ç½®
- `tsconfig.test.json` - æµ‹è¯•é…ç½®
- `jest.config.js` - Jest é…ç½®
- `.eslintrc.js` - ESLint é…ç½®
- `.gitignore` - Git é…ç½®

### æµ‹è¯•æ–‡ä»¶
- `tests/unit/lexer.test.ts` - Lexer æµ‹è¯•
- `tests/unit/parser.test.ts` - Parser æµ‹è¯•
- `tests/parser-example.ts` - ä½¿ç”¨ç¤ºä¾‹
- `tests/fixtures/example.ggb` - æµ‹è¯•æ•°æ®

### æ–‡æ¡£æ–‡ä»¶
- `README.md` - é¡¹ç›®ä¸»æ–‡æ¡£
- `EXAMPLES.md` - ä½¿ç”¨ç¤ºä¾‹
- `QUICKSTART.md` - å¿«é€Ÿå¼€å§‹
- `SUMMARY.md` - æœ¬æ–‡æ¡£

### å·¥å…·æ–‡ä»¶
- `scripts/cli.js` - CLI å·¥å…·

---

**æ—¥æœŸ**: 2025å¹´12æœˆ5æ—¥
**çŠ¶æ€**: âœ… å®Œæˆ
**ç‰ˆæœ¬**: 1.0.0
